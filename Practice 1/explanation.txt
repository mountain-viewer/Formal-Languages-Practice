Будем использовать стек для разбора регулярного выражения в обратной польской записи.

В стеке храним состояния (максимальная длина слова, состоящего из x, которое соответствует данному регулярному
выражению; максимальный суффикс, составленный только из x и соответствующий регулярному выражению).

Теперь когда мы задали величины, которые поддерживаем на каждом шаге, остается только их правильно пересчитывать при
выполнении операций '+', '.', '*', а также обрабатывать ситуации, когда нарушается корректность заданного регулярного
выражения.